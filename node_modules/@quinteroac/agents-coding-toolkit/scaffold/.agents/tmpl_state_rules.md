# State validation rules (scaffold)

<!-- TODO: Fill in preconditions and postconditions per command. All content in English. -->

Each command must validate the relevant fields of `state.json` before running. If the current state does not allow the command, the command fails with a clear message.

| Command | Pre | Post |
|--------|-----|-----|
| `bun start iteration` | TBD | TBD |
| `bun define requirement` | TBD | TBD |
| `bun refine requirement` | TBD | TBD |
| `bun approve requirement` | TBD | TBD |
| `bun create prd` | TBD | TBD |
| `bun create project-context` | TBD | TBD |
| `bun approve project-context` | TBD | TBD |
| `bun create prototype` | TBD | TBD |
| `bun define test-plan` | TBD | TBD |
| `bun refine test-plan` | TBD | TBD |
| `bun approve test-plan` | TBD | TBD |
| `bun execute test-plan` | TBD | TBD |
| `bun execute automated-fix` | TBD | TBD |
| `bun execute manual-fix` | TBD | TBD |
| `bun define refactor-plan` | TBD | TBD |
| `bun refine refactor-plan` | TBD | TBD |
| `bun approve refactor-plan` | TBD | TBD |
| `bun create prd --refactor` | TBD | TBD |
| `bun execute refactor` | TBD | TBD |
| `bun register changelog` (or equivalent) | TBD | TBD |
